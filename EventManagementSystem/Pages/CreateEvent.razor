@page "/create-event"
@layout MainLayout
@inject EventService EventService
@inject NavigationManager Navigation

<div class="container mt-5 p-5 bg-dark rounded-full shadow">
    <h3 class="text-center text-white mb-4">Create New Event</h3>

    <EditForm Model="newEvent" OnValidSubmit="HandleValidSubmit">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <div class="row">
            <!-- Event Name -->
            <div class="col-lg-6 col-md-12 mb-4">
                <label for="eventName" class="text-sm text-light">Event Name</label>
                <InputText id="eventName" class="form-control form-control-lg" @bind-Value="newEvent.Name" required />
            </div>

            <!-- Event Date -->
            <div class="col-lg-6 col-md-12 mb-4">
                <label for="eventDate" class="text-sm text-light">Event Date</label>
                <InputDate id="eventDate" class="form-control form-control-lg" @bind-Value="newEvent.Date" required />
            </div>
        </div>

        <div class="row">
            <!-- Event Time -->
            <div class="col-lg-6 col-md-12 mb-4">
                <label for="eventTime" class="text-sm text-light">Event Time</label>
                <InputText id="eventTime" class="form-control form-control-lg" @bind-Value="newEvent.Time" type="time" required />
            </div>

            <!-- Event Description -->
            <div class="col-lg-6 col-md-12 mb-4">
                <label for="eventDescription" class="text-sm text-light">Event Description</label>
                <InputTextArea id="eventDescription" class="form-control form-control-lg" @bind-Value="newEvent.Description" rows="4" required />
            </div>
        </div>

        <!-- Create Event Button -->
        <div class="text-center">
            <button type="submit" class="btn btn-success btn-lg w-100 mt-4">Create Event</button>
        </div>
    </EditForm>

    <!-- Back Button -->
    <div class="text-center mt-4">
        <button class="btn btn-secondary btn-lg" @onclick="NavigateBack">Back to Dashboard</button>
    </div>
</div>

@code {
    private Event newEvent = new Event();

    private async Task HandleValidSubmit()
    {
        await EventService.CreateEvent(newEvent);
        Navigation.NavigateTo("/dashboard");
    }

    private void NavigateBack()
    {
        Navigation.NavigateTo("/dashboard");
    }
}